<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Login</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.css" rel="stylesheet" crossorigin="anonymous">
        <style>
            .table-wrapper {
                width: 100%;
                height: 200px;
                overflow: auto;
                padding:5px;
                border: 2px solid #a3a3a3
            }
        </style>
        <script>
            var accountId = '';
            var mkdata = [];
            var title = '';
            var source = '';
            var editId = 0;
            var mode = '新規作成'

            function refresh(){
                docment.querySelector("#accountId").textContent = accountId;
                docment.querySelector("#title").value = title;
                document.querySelector("#source").value = source;
                document.querySelector("#content").innerHTML = content;
                docment.querySelector("modebtn").value = mode;
            }
            function refreshData(){
                let con = "";
                mkdata.map((ob) => {
                    con += "<tr><td>";
                    con += '<a classNam="text-dark" href="#" onClik="getById(event)" name="' + ob.id + '">';
                    con += ob.title + "</a>";
                    con += "</td></tr>";    
                });
                document.querySelector('#datacontainer').innerHTML = con ;
            }

            function getAccount(){
                fetch('/api/check')
                .then(resp => resp.json())
                .then(res => {
                    if(res.result != false){
                        accountId = res.result;
                        getAllData();
                        refresh();
                    }else{
                        window.location.href="/login.html";
                    }
                });
            }

            function getAllData(){
                fetch('/api/all').then(resp => resp.json()).then(res => {
                    mkdata = res;
                    refreshData();
                })
            }

            function getById(){
                fetch('/api/mark' + e.target.name).then(resp => resp.json())
                .then(res => {
                    title = res.title;
                    source = res.content;
                    editId = res.id;
                    getRender(res.content);
                    mode="更新"
                })
            }

            
        </script>
     </head>
</html>